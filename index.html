<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Organizador Financeiro</title>

    <!-- React e ReactDOM (CDN) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <!-- Babel para usar JSX inline -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 1rem;
        background-color: #f9f9f9;
      }
      .app {
        max-width: 800px;
        margin: 0 auto;
      }
      .box {
        border: 1px solid #ccc;
        padding: 1rem;
        margin: 1rem 0;
        background-color: #fff;
      }
      .form-group {
        margin: 1rem 0;
      }
      .form-group label {
        display: block;
        margin-bottom: 0.5rem;
      }
      .form-group input {
        width: 100%;
        padding: 0.5rem;
        box-sizing: border-box;
      }
      .radio-group {
        margin: 0.5rem 0;
      }
      .btn {
        padding: 0.5rem 1rem;
        background-color: #007bff;
        color: #fff;
        border: none;
        cursor: pointer;
      }
      .btn-danger {
        background-color: #dc3545;
        padding: 0.2rem 0.5rem;
        border: none;
        cursor: pointer;
        font-size: 0.9rem;
      }
      .list-item {
        border-bottom: 1px solid #eee;
        padding: 0.5rem 0;
        display: flex;
        justify-content: space-between;
      }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      // Função de componente principal
      function App() {
        const [transacoes, setTransacoes] = React.useState([
          { id: 1, descricao: "Salário", valor: 2000, tipo: "entrada" },
          { id: 2, descricao: "Aluguel", valor: 800, tipo: "saida" },
        ]);
        const [descricao, setDescricao] = React.useState("");
        const [valor, setValor] = React.useState("");
        const [tipo, setTipo] = React.useState("saida");

        // Cálculos
        const totalEntradas = transacoes
          .filter((t) => t.tipo === "entrada")
          .reduce((acc, t) => acc + t.valor, 0);

        const totalSaidas = transacoes
          .filter((t) => t.tipo === "saida")
          .reduce((acc, t) => acc + t.valor, 0);

        const saldo = totalEntradas - totalSaidas;

        const adicionarTransacao = (e) => {
          e.preventDefault();
          const novaTransacao = {
            id: Date.now(),
            descricao,
            valor: parseFloat(valor) || 0,
            tipo,
          };
          setTransacoes((prev) => [...prev, novaTransacao]);
          setDescricao("");
          setValor("");
          setTipo("saida");
        };

        const excluirTransacao = (id) => {
          setTransacoes((prev) => prev.filter((t) => t.id !== id));
        };

        return (
          <div className="app">
            <header>
              <h1>Organizador Financeiro</h1>
            </header>

            {/* Resumo */}
            <div className="box">
              <h2>Resumo Financeiro</h2>
              <p>Entradas: R$ {totalEntradas.toFixed(2)}</p>
              <p>Saídas: R$ {totalSaidas.toFixed(2)}</p>
              <p>
                <strong>Saldo: R$ {saldo.toFixed(2)}</strong>
              </p>
            </div>

            {/* Formulário */}
            <form className="box" onSubmit={adicionarTransacao}>
              <h2>Adicionar Lançamento</h2>

              <div className="form-group">
                <label>Descrição</label>
                <input
                  type="text"
                  value={descricao}
                  onChange={(e) => setDescricao(e.target.value)}
                  placeholder="Ex.: mercado, salário"
                  required
                />
              </div>

              <div className="form-group">
                <label>Valor</label>
                <input
                  type="number"
                  step="0.01"
                  value={valor}
                  onChange={(e) => setValor(e.target.value)}
                  placeholder="R$ 0,00"
                  required
                />
              </div>

              <div className="radio-group">
                <label>
                  <input
                    type="radio"
                    name="tipo"
                    value="entrada"
                    checked={tipo === "entrada"}
                    onChange={() => setTipo("entrada")}
                  />{" "}
                  Entrada
                </label>{" "}
                <label>
                  <input
                    type="radio"
                    name="tipo"
                    value="saida"
                    checked={tipo === "saida"}
                    onChange={() => setTipo("saida")}
                  />{" "}
                  Saída
                </label>
              </div>

              <button type="submit" className="btn">
                Adicionar Lançamento
              </button>
            </form>

            {/* Histórico */}
            <div className="box">
              <h2>Histórico de Lançamentos</h2>
              <div>
                {transacoes.map((t) => (
                  <div key={t.id} className="list-item">
                    <span>
                      {t.descricao} - R$ {t.valor.toFixed(2)} ({t.tipo})
                    </span>
                    <button
                      className="btn-danger"
                      onClick={() => excluirTransacao(t.id)}
                    >
                      Excluir
                    </button>
                  </div>
                ))}
              </div>
            </div>
          </div>
        );
      }

      // Renderização
      const container = document.getElementById("root");
      const root = ReactDOM.createRoot(container);
      root.render(<App />);
    </script>
  </body>
</html>
